import os
from PIL import Image

# åŸå›¾æ–‡ä»¶å¤¹
src_folder = "gallery_src"
# è¾“å‡ºæ–‡ä»¶å¤¹
dst_folder = "gallery_thumbs"
# ç¼©ç•¥å›¾å¤§å°
size = (150, 150)

os.makedirs(dst_folder, exist_ok=True)

print("ğŸ“¸ å¼€å§‹è£å‰ªç¼©ç•¥å›¾...\n")

for filename in os.listdir(src_folder):
    if filename.lower().endswith((".png", ".jpg", ".jpeg", ".gif")):
        src_path = os.path.join(src_folder, filename)
        dst_path = os.path.join(dst_folder, filename)

        try:
            img = Image.open(src_path)
            # å±…ä¸­è£å‰ªä¸ºæ­£æ–¹å½¢
            w, h = img.size
            min_side = min(w, h)
            left = (w - min_side) / 2
            top = (h - min_side) / 2
            right = (w + min_side) / 2
            bottom = (h + min_side) / 2
            img = img.crop((left, top, right, bottom))

            # è°ƒæ•´å¤§å°
            img = img.resize(size, Image.LANCZOS)
            img.save(dst_path)

            print(f"âœ… å·²å¤„ç†: {filename}")
        except Exception as e:
            print(f"âŒ å‡ºé”™ {filename}: {e}")

print("\nğŸ‰ å…¨éƒ¨å®Œæˆï¼ç»“æœåœ¨ â†’", dst_folder)
