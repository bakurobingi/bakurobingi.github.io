/* =========================
   主题 & 全局
========================= */
:root{
  --main-color:#8c84d9;   /* 主色 */
  --light-color:#dcd6f7;  /* 高光 */
  --text:#333;
  --muted:#888;
  --line:#e5e5e5;
  --bg:#f5f5f5;

  /* 字体 & 尺寸 */
  --ff-cn:"YouYuan","幼圆","Hiragino Maru Gothic ProN","Yu Gothic UI","Meiryo","Baloo 2",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  --ff-en:"Baloo 2","Comic Sans MS",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  --fz-base:14px;     /* 基础字号 */
  --fz-body:20px;     /* 日记正文字号 */
  --radius:12px;
  --shadow:0 2px 10px rgba(0,0,0,.06);
}

html,body{
  margin:0; padding:0; overflow-x:hidden;
  color:var(--text);
  font:400 var(--fz-base)/1.65 var(--ff-cn);
  background:var(--bg) url("assets/bg.jpg") center/cover fixed no-repeat;
  text-align:center;
}

/* 排版基础 */
h1,h2,h3,p,ul,ol{ margin:0 0 .8em; }
h1{ font-size:22px; font-weight:700; }
h2{ font-size:18px; font-weight:700; color:var(--main-color); }
h3{ font-size:16px; font-weight:700; }
a{ color:var(--main-color); text-decoration:none; }
a:hover{ text-decoration:underline; }
small{ font-size:12px; color:var(--muted); }

/* 容器：全站内容不全屏，居中 */
.wrap{
  width:min(100%, 1000px);
  margin:22px auto;
  padding:0 16px;
  text-align:left;
}

/* 卡片/分区 */
.section{
  background:#fff; border:1px solid var(--line); border-radius:var(--radius);
  box-shadow:var(--shadow); padding:16px;
}
.btn,.filter-btn,.year-toggle{
  display:inline-block; padding:8px 12px; border-radius:10px;
  border:1px solid var(--line); background:#fff; color:var(--text); cursor:pointer;
}
.btn:hover,.filter-btn:hover,.year-toggle:hover{ border-color:var(--main-color); }
.filter-btn.active{ background:var(--main-color); color:#fff; border-color:var(--main-color); }

/* 顶部头像/简介（如有） */
.profile{text-align:center; margin-bottom:16px;}
.profile .links a{ color:var(--text); }
.profile .links a + a::before{ content:" | "; color:#ccc; margin:0 .25em; }

/* =========================
   日记页
   需要：#diary-list（左） #diary-content（右）
========================= */
.diary-container{
  display:flex; gap:20px; margin-top:24px; text-align:left;
}
.diary-nav{ flex:1; max-width:260px; }
.diary-content{ flex:3; }

/* 左侧导航卡片 */
.diary-nav .section{ padding:14px; }
#diary-list{ list-style:none; padding:0; margin:0; }

/* 年份折叠 */
#diary-list .year-toggle{
  width:100%; text-align:left; margin:10px 0 6px;
}
#diary-list .year-toggle .count{ color:var(--muted); font-weight:400; margin-left:.25em; }
#diary-list .year-toggle .chev{ float:right; transition:.2s; }
#diary-list .year-group.collapsed .year-toggle .chev{ transform:rotate(-90deg); }

#diary-list .year-list{ list-style:none; padding-left:8px; margin:6px 0 12px; }
#diary-list .year-group.collapsed .year-list{ display:none; }

/* 左侧条目：标题+日期两行 */
#diary-list .year-list li{ margin:6px 0; }
#diary-list .year-list a{
  display:block; border-radius:8px; padding:6px 8px; color:#333; text-decoration:none;
}
#diary-list .year-list a:hover{ background:rgba(140,132,217,.06); }
#diary-list .year-list a.active{ background:var(--main-color); color:#fff; }
#diary-list .year-list a strong{ display:block; }
#diary-list .year-list a .diary-date{ display:block; font-size:12px; color:var(--muted); margin-top:2px; }

/* 右侧正文卡片 */
.diary-content .section{ padding:18px; }
.diary-content{ overflow-wrap:anywhere; word-break:break-word; }

/* 正文通用媒体约束 */
.diary-content :where(img,video,canvas){
  display:block; max-width:100% !important; height:auto !important;
  margin:12px auto; border-radius:8px; box-shadow:var(--shadow);
}
.diary-content :where(table,pre,code){ max-width:100%; overflow-x:auto; display:block; }

/* 正文顶部：标题 + 日期 */
.diary-content .diary-header{
  border-bottom:1px solid var(--line); padding-bottom:8px; margin-bottom:14px;
}
.diary-content .diary-title{ margin:0; }
.diary-content .diary-meta{ font-size:13px; color:var(--muted); margin-top:4px; }

/* 正文字号（仅正文区域放大到20px） */
.diary-content{ font-size:var(--fz-body); line-height:1.8; }

/* 剧透折叠 */
.diary-content details.spoiler{
  margin:12px 0; padding:10px 12px; background:rgba(140,132,217,.06);
  border:1px solid var(--line); border-radius:8px;
}
.diary-content details.spoiler > summary{
  cursor:pointer; font-weight:700; color:var(--main-color); list-style:none; outline:none;
}
.diary-content details.spoiler > summary::-webkit-details-marker{ display:none; }
.diary-content details.spoiler > summary::before{ content:"▶"; margin-right:8px; transition:transform .2s; }
.diary-content details.spoiler[open] > summary::before{ transform:rotate(90deg); }
.diary-content .spoiler-body{ margin-top:.6em; }

/* =========================
   画廊
   需要：#year-bar #tag-bar #gallery-grid #pagination …
========================= */
.filters{ display:flex; flex-wrap:wrap; gap:8px; margin-bottom:12px; }
#year-bar,#tag-bar{ display:flex; flex-wrap:wrap; gap:8px; }

#gallery-grid{
  display:grid; grid-template-columns:repeat(3,1fr); gap:10px;
}
#gallery-grid img{
  width:100%; height:100%; object-fit:cover; border-radius:10px; box-shadow:var(--shadow);
  cursor:pointer; display:block;
}

/* 分页 */
#pagination{ display:flex; align-items:center; gap:10px; justify-content:center; margin:12px 0; }
#page-info{ color:var(--muted); }

/* 灯箱 */
#lightbox{
  position:fixed; inset:0; display:none; align-items:center; justify-content:center;
  background:rgba(0,0,0,.7); z-index:9999;
}
#lightbox .lightbox-inner{ max-width:min(92vw,1100px); max-height:90vh; }
#lightbox-img{ max-width:100%; max-height:80vh; display:block; margin:0 auto 8px; border-radius:8px; }
#lightbox-caption{ color:#fff; text-align:center; }

/* =========================
   其他/通用
========================= */
.header,.footer{ text-align:center; color:var(--muted); }

/* 表单（AskBox等） */
.askbox{ background:#fff; border:1px solid var(--line); border-radius:12px; padding:16px; }
.askbox input,.askbox textarea{
  width:100%; box-sizing:border-box; border:1px solid #ddd; border-radius:10px;
  padding:10px 12px; margin:8px 0; font-size:16px;
}
.askbox textarea{ min-height:120px; resize:vertical; }

/* =========================
   响应式
========================= */
@media (max-width: 860px){
  .wrap{ width:min(100%, 760px); }
  .diary-container{ flex-direction:column; }
  .diary-nav{ max-width:none; }
  #gallery-grid{ grid-template-columns:repeat(2,1fr); }
}
@media (max-width: 520px){
  #gallery-grid{ grid-template-columns:1fr; }
  .diary-content{ font-size:18px; } /* 小屏略收一丢丢，防止行太短显得大 */
}
